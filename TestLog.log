02/17/2020 10:21:39 AM - <module> - INFO: # Start test Проверить заполнение ответа при успешной загрузке проекта договора ОСАГО/eОСАГО (Type=DraftContractForClosing) (Errors.Code=0)
02/17/2020 10:21:39 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:39 AM - <module> - INFO: Connect producer
02/17/2020 10:21:39 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:39 AM - <module> - INFO: # Start listening
02/17/2020 10:21:40 AM - <module> - INFO: # Send message
02/17/2020 10:21:40 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'DraftContractForClosing', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'Contract', 'internalIds': {'cisContractId': '9235c474-n745-9f58-a559-51161e54d8bc', 'contractId': '16e74a9a-cf20-451a-8352-e199db46c9a1', 'cisVersionId': 0}, 'insuranceContract': {'contractClosingDate': '2019-10-04T16:41:41.090Z', 'contractEffectiveDate': '2019-12-01T00:00:00.000Z', 'expirationDate': '2020-11-30T00:00:00.000Z', 'issueDate': '2019-10-04T00:00:00.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': True, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': False, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 5986.71, 'premiumSynchDate': '2019-10-04T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 12345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 16374886400, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'person': {'mdmId': 83573853567, 'inn': 644901371165, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 4719, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'altIdentityCard': {'docType': 12, 'countryCode': 643, 'docNumber': 4711, 'docSeries': 22227, 'issueDate': '2016-12-01T00:00:00.000Z', 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}, 'altDriverLicense': {'docType': 22, 'docSeries': 5001, 'docNumber': 456123, 'issueDate': '2016-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}, {'partyType': 'Person', 'partyRoles': ['Driver'], 'person': {'mdmId': 34578682352, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f88b', 'driverLicense': {'docType': 22, 'docSeries': 5003, 'docNumber': 321456, 'issueDate': '2011-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петров', 'firstName': 'Николай', 'middleName': 'Иванович', 'birthDate': '1985-01-01T00:00:00.000Z', 'firstLicensedDate': '2011-12-10T00:00:00.000Z', 'drivingExperience': 7, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:40 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924150, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'DraftContractForClosing', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 4, 'Message': 'Ошибка ФЛК сервиса РСА'}}, 'ResponseData': {'SubjectObjectCheckResults': [{'Path': 'vehicle', 'MdmFoundIndicator': False, 'DocumentCheckStatuses': [{'DocumentType': 'VehicleDocument', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': False}]}, {'Path': 'parties[0].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'IdentityCard', 'FoivFoundIndicator': False, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': False, 'MdmCheckedIndicator': True}, {'DocumentType': 'AltIdentityCard', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}, {'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}, {'DocumentType': 'AltDriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}, {'Path': 'parties[1].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}], 'ProcessingResult': {'RequestType': 'DraftContract', 'InternalIds': {'ContractId': '16e74a9a-cf20-451a-8352-e199db46c9a1'}, 'InsuranceContract': {'ContractSeries': 'XXX', 'ContractNumber': 3456789120, 'StatusCode': 1, 'ReadyToSignIndicator': True}, 'Vehicle': {'MdmId': 12345678912}, 'Parties': [{'PartyType': 'Person', 'PartyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'Person': {'MdmId': 83573853567}}, {'PartyType': 'Person', 'PartyRoles': ['Driver'], 'Person': {'MdmId': 34578682352}}]}, 'RequestId': '3585c474-a817-4f58-a559-51161e54d5d2', 'ResponseId': '3585c474-a817-4f58-a559-51161e54d5d3', 'StatusCode': 3, 'LastModified': '2019-02-28T16:41:41.09Z'}}
02/17/2020 10:21:40 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:40 AM - <module> - INFO: Connections closed!
02/17/2020 10:21:40 AM - <module> - INFO: # Start test Проверить заполнение ответа при указании невалидного значения атрибута Method (Errors.Code=1)
02/17/2020 10:21:40 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:40 AM - <module> - INFO: Connect producer
02/17/2020 10:21:40 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:40 AM - <module> - INFO: # Start listening
02/17/2020 10:21:41 AM - <module> - INFO: # Send message
02/17/2020 10:21:41 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'Невалидный метод', 'Type': 'DraftContractForClosing', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'Contract', 'internalIds': {'cisContractId': '9235c474-n745-9f58-a559-51161e54d8bc', 'contractId': '16e74a9a-cf20-451a-8352-e199db46c9a1', 'cisVersionId': 0}, 'insuranceContract': {'contractClosingDate': '2019-10-04T16:41:41.090Z', 'contractEffectiveDate': '2019-12-01T00:00:00.000Z', 'expirationDate': '2020-11-30T00:00:00.000Z', 'issueDate': '2019-10-04T00:00:00.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': True, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': False, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 5986.71, 'premiumSynchDate': '2019-10-04T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 12345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 16374886400, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'person': {'mdmId': 83573853567, 'inn': 644901371165, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 4719, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'altIdentityCard': {'docType': 12, 'countryCode': 643, 'docNumber': 4711, 'docSeries': 22227, 'issueDate': '2016-12-01T00:00:00.000Z', 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}, 'altDriverLicense': {'docType': 22, 'docSeries': 5001, 'docNumber': 456123, 'issueDate': '2016-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}, {'partyType': 'Person', 'partyRoles': ['Driver'], 'person': {'mdmId': 34578682352, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f88b', 'driverLicense': {'docType': 22, 'docSeries': 5003, 'docNumber': 321456, 'issueDate': '2011-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петров', 'firstName': 'Николай', 'middleName': 'Иванович', 'birthDate': '1985-01-01T00:00:00.000Z', 'firstLicensedDate': '2011-12-10T00:00:00.000Z', 'drivingExperience': 7, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:41 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924151, 'InfId': 1, 'Version': 'v.1', 'Method': 'Невалидный метод', 'Type': 'DraftContractForClosing', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 1, 'Message': '10. Указано недопустимое значение для поля Method'}}, 'ResponseData': None}
02/17/2020 10:21:41 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:41 AM - <module> - INFO: Connections closed!
02/17/2020 10:21:41 AM - <module> - INFO: # Start test Проверить заполнение ответа при указании невалидного значения атрибута Type (Errors.Code=1)
02/17/2020 10:21:41 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:41 AM - <module> - INFO: Connect producer
02/17/2020 10:21:41 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:41 AM - <module> - INFO: # Start listening
02/17/2020 10:21:42 AM - <module> - INFO: # Send message
02/17/2020 10:21:42 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'Невалидный тип', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'Contract', 'internalIds': {'cisContractId': '9235c474-n745-9f58-a559-51161e54d8bc', 'contractId': '16e74a9a-cf20-451a-8352-e199db46c9a1', 'cisVersionId': 0}, 'insuranceContract': {'contractClosingDate': '2019-10-04T16:41:41.090Z', 'contractEffectiveDate': '2019-12-01T00:00:00.000Z', 'expirationDate': '2020-11-30T00:00:00.000Z', 'issueDate': '2019-10-04T00:00:00.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': True, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': False, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 5986.71, 'premiumSynchDate': '2019-10-04T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 12345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 16374886400, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'person': {'mdmId': 83573853567, 'inn': 644901371165, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 4719, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'altIdentityCard': {'docType': 12, 'countryCode': 643, 'docNumber': 4711, 'docSeries': 22227, 'issueDate': '2016-12-01T00:00:00.000Z', 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}, 'altDriverLicense': {'docType': 22, 'docSeries': 5001, 'docNumber': 456123, 'issueDate': '2016-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}, {'partyType': 'Person', 'partyRoles': ['Driver'], 'person': {'mdmId': 34578682352, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f88b', 'driverLicense': {'docType': 22, 'docSeries': 5003, 'docNumber': 321456, 'issueDate': '2011-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петров', 'firstName': 'Николай', 'middleName': 'Иванович', 'birthDate': '1985-01-01T00:00:00.000Z', 'firstLicensedDate': '2011-12-10T00:00:00.000Z', 'drivingExperience': 7, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:42 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924152, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'Невалидный тип', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 1, 'Message': '11. Указано недопустимое значение для поля Type'}}, 'ResponseData': None}
02/17/2020 10:21:42 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:42 AM - <module> - INFO: Connections closed!
02/17/2020 10:21:42 AM - <module> - INFO: # Start test Проверить заполнение ответа при успешной загрузке заключенного договора ОСАГО (Type = BSO) (Errors.Code=0)
02/17/2020 10:21:42 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:42 AM - <module> - INFO: Connect producer
02/17/2020 10:21:42 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:42 AM - <module> - INFO: # Start listening
02/17/2020 10:21:43 AM - <module> - INFO: # Send message
02/17/2020 10:21:43 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'Bso', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'Bso', 'internalIds': {'cisContractId': '1f0a0998-28af-47d1-ab36-8ec1fc0952d6', 'cisVersionId': 0, 'contractId': '02b0b5a8-bc26-4b4c-8d37-2f084bd0a1ae'}, 'insuranceContract': {'contractSeries': 'PPP', 'contractNumber': 4564545656, 'contractClosingDate': '2019-10-04T16:41:41.090Z', 'contractEffectiveDate': '2019-12-01T00:00:00.000Z', 'expirationDate': '2020-11-30T23:59:59.590Z', 'issueDate': '2019-10-04T00:00:00.000Z', 'revisionDate': '2020-11-13T15:10:56.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': True, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': True, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 5986.71, 'premiumSynchDate': '2019-10-06T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 33345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 123458466178945, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'person': {'inn': 644901371115, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 6119, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Маркова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'altIdentityCard': {'docType': 12, 'countryCode': 643, 'docNumber': 6711, 'docSeries': 22227, 'issueDate': '2016-12-01T00:00:00.000Z', 'lastName': 'Маркова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}, 'altDriverLicense': {'docType': 22, 'docSeries': 5001, 'docNumber': 456123, 'issueDate': '2016-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Иванова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}, {'partyType': 'Person', 'partyRoles': ['Driver'], 'person': {'kbmValue': 1, 'kbmRequestId': '1314c26c-e791-4855-9eaa-cdfe6220f88b', 'driverLicense': {'docType': 22, 'docSeries': 5003, 'docNumber': 321456, 'issueDate': '2011-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петров', 'firstName': 'Николай', 'middleName': 'Иванович', 'birthDate': '1985-01-01T00:00:00.000Z', 'firstLicensedDate': '2011-12-10T00:00:00.000Z', 'drivingExperience': 7, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:43 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924153, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'Bso', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 4, 'Message': 'Ошибка ФЛК сервиса РСА'}}, 'ResponseData': {'SubjectObjectCheckResults': [{'Path': 'vehicle', 'MdmFoundIndicator': False, 'DocumentCheckStatuses': [{'DocumentType': 'VehicleDocument', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': False}]}, {'Path': 'parties[0].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'IdentityCard', 'FoivFoundIndicator': False, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': False, 'MdmCheckedIndicator': True}, {'DocumentType': 'AltIdentityCard', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}, {'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}, {'DocumentType': 'AltDriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}, {'Path': 'parties[1].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}], 'ProcessingResult': {'RequestType': 'Contract', 'InternalIds': {'ContractId': '02b0b5a8-bc26-4b4c-8d37-2f084bd0a1ae'}, 'InsuranceContract': {'ContractSeries': 'XXX', 'ContractNumber': 4564545656, 'StatusCode': 3}, 'Vehicle': {'MdmId': 33345678912}, 'Parties': [{'PartyType': 'Person', 'PartyRoles': ['Driver', 'PolicyHolder', 'Owner'], 'Person': {'MdmId': 88883853567}}, {'PartyType': 'Person', 'PartyRoles': ['Driver'], 'Person': {'MdmId': 34448682352}}]}, 'RequestId': '8c97b623-caae-4fa9-a5de-97b95997aec3', 'ResponseId': '45ec1079-68a6-435f-a526-0564b80f4e21', 'StatusCode': 3, 'LastModified': '2019-10-04T16:41:41.09Z'}}
02/17/2020 10:21:43 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:43 AM - <module> - INFO: Connections closed!
02/17/2020 10:21:43 AM - <module> - INFO: # Start test Проверить заполнение ответа при успешной загрузке заключенного доп.соглашения ОСАГО/eОСАГО (Type=BSOAddendum) (Errors.Code=0)
02/17/2020 10:21:43 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:43 AM - <module> - INFO: Connect producer
02/17/2020 10:21:43 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:43 AM - <module> - INFO: # Start listening
02/17/2020 10:21:44 AM - <module> - INFO: # Send message
02/17/2020 10:21:44 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'BsoAddendum', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'BsoAddendum', 'internalIds': {'cisContractId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'cisVersionId': 1}, 'insuranceContract': {'addendumSeries': 'PPP', 'addendumNumber': 563356834, 'addendumType': 1, 'addendumClosingDate': '2020-01-01T10:00:00.000Z', 'addendumEffectiveDate': '2020-01-12T00:00:00.000Z', 'expirationDate': '2020-11-30T00:00:00.000Z', 'issueDate': '2020-01-01T00:00:00.000Z', 'revisionDate': '2020-01-01T09:01:50.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': False, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': False, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 11195.15, 'premiumSynchDate': '2020-01-01T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1.87, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 12345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 16374886400, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['PolicyHolder', 'Owner', 'Driver'], 'person': {'mdmId': 83573853568, 'inn': 644901371115, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '5514c35a-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 4719, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:44 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924154, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'BsoAddendum', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 4, 'Message': 'Ошибка ФЛК сервиса РСА'}}, 'ResponseData': {'SubjectObjectCheckResults': [{'Path': 'vehicle', 'MdmFoundIndicator': False, 'DocumentCheckStatuses': [{'DocumentType': 'VehicleDocument', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': False}]}, {'Path': 'parties[0].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'IdentityCard', 'FoivFoundIndicator': False, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': False, 'MdmCheckedIndicator': True}, {'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}], 'ProcessingResult': {'RequestType': 'Addendum', 'InternalIds': {'ContractId': 'bc57d1e4-853a-4565-8f41-b4e89427de31', 'AddendumId': 'b5a41495-f5cf-4665-ac57-72630805760c'}, 'InsuranceContract': {'AddendumSeries': 'XXX', 'AddendumNumber': 563356834, 'StatusCode': 3}, 'Vehicle': {'MdmId': 12345678913}, 'Parties': [{'PartyType': 'Person', 'PartyRoles': ['PolicyHolder', 'Owner', 'Driver'], 'Person': {'MdmId': 83573853568}}]}, 'RequestId': '50452d96-57b0-4d24-b965-01f28a9d7cc2', 'ResponseId': '16358735-a6d2-473a-a59f-112a71a66dc8', 'StatusCode': 3, 'LastModified': '2020-01-01T15:05:55Z'}}
02/17/2020 10:21:44 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:44 AM - <module> - INFO: Connections closed!
02/17/2020 10:21:44 AM - <module> - INFO: # Start test Проверить заполнение ответа при успешной загрузке проекта доп.соглашения ОСАГО/eОСАГО (Type=DraftAddendum) (Errors.Code=0)
02/17/2020 10:21:44 AM - <module> - INFO: Load settings from settings.json
02/17/2020 10:21:44 AM - <module> - INFO: Connect producer
02/17/2020 10:21:44 AM - <module> - INFO: Connect consumer
02/17/2020 10:21:44 AM - <module> - INFO: # Start listening
02/17/2020 10:21:45 AM - <module> - INFO: # Send message
02/17/2020 10:21:45 AM - <module> - INFO: > Send msg: {'SysInfo': {'TimeStamp': 123123, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'DraftAddendum', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41'}, 'RequestData': {'requestType': 'DraftAddendum', 'internalIds': {'cisContractId': '0648584b-149c-4109-908d-da85fe2f6925', 'cisVersionId': 1}, 'insuranceContract': {'addendumType': 1, 'addendumClosingDate': '2019-10-04T16:41:41.090Z', 'addendumEffectiveDate': '2019-12-01T00:00:00.000Z', 'expirationDate': '2020-11-30T00:00:00.000Z', 'issueDate': '2020-01-01T00:00:00.000Z', 'revisionDate': '2020-01-01T09:01:50.000Z', 'classifiedIndicator': False, 'closingType': 1, 'driverLimitIndicator': False, 'utilisationPeriod1Begin': '2019-12-01T00:00:00.000Z', 'utilisationPeriod1End': '2020-03-31T00:00:00.000Z', 'utilisationPeriod2Begin': '2020-09-01T00:00:00.000Z', 'utilisationPeriod2End': '2020-11-30T00:00:00.000Z', 'registrationTransitIndicator': False, 'purposeCode': 1, 'primaryDrivingArea': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5', 'trailerIndicator': False, 'premiumAmount': 11195.15, 'premiumSynchDate': '2020-01-01T00:00:00.000Z', 'rates': {'tb': 2800, 'kt': 2, 'kbm': 1, 'ko': 1.87, 'kvs': 0.96, 'km': 1.2, 'ks': 0.8, 'kn': 1, 'kpr': 1.16}, 'stoas': [{'fullName': 'СТО ХХI ВЕК', 'address': 'г.Москва, пр-кт Ленина, д.1'}]}, 'vehicle': {'mdmId': 12345678912, 'maintenanceCardType': 53, 'maintenanceCardNumber': 16374886400, 'upcomingMaintenanceDate': '2020-01-01T00:00:00.000Z', 'vehicleDocument': {'countryCode': 643, 'docType': 31, 'docSeries': '99АА', 'docNumber': 999999, 'issueDate': '2018-12-01T00:00:00.000Z', 'licensePlate': 'Р859ЕН73', 'vin': '4T1BE30K12U058669', 'bodyNumber': 'ASV71', 'chassisNumber': 'DF4464646FG77', 'modification': 6.04532554883795e+23, 'productionYear': 2002, 'needFoivCheckIndicator': True}}, 'parties': [{'partyType': 'Person', 'partyRoles': ['PolicyHolder', 'Owner', 'Driver'], 'person': {'mdmId': 83573853568, 'inn': 644901371115, 'snils': '112233445 95', 'badHistoryBasis': 12, 'kbmValue': 1, 'kbmRequestId': '5514c35a-e791-4855-9eaa-cdfe6220f27b', 'identityCard': {'docType': 12, 'countryCode': 643, 'docSeries': 4719, 'docNumber': 898989, 'issueDate': '2018-12-01T00:00:00.000Z', 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'addressFias': '0e8a15ac-7066-46eb-807c-af52c74b7190', 'needFoivCheckIndicator': True}, 'driverLicense': {'docType': 22, 'docSeries': 5004, 'docNumber': 123456, 'issueDate': '2018-12-10T00:00:00.000Z', 'countryCode': 643, 'lastName': 'Петрова', 'firstName': 'Наталья', 'middleName': 'Ивановна', 'birthDate': '1990-01-01T00:00:00.000Z', 'firstLicensedDate': '2016-12-10T00:00:00.000Z', 'drivingExperience': 2, 'needFoivCheckIndicator': True}}}]}}
02/17/2020 10:21:45 AM - <module> - INFO: > Get msg: {'SysInfo': {'TimeStamp': 1581924155, 'InfId': 1, 'Version': 'v.1', 'Method': 'LoadPolicy', 'Type': 'DraftAddendum', 'Parameters': {}, 'TicketId': 'ab06ca8c-92df-4405-92ec-c1fd53cbfe41', 'Errors': {'Code': 4, 'Message': 'Ошибка ФЛК сервиса РСА'}}, 'ResponseData': {'SubjectObjectCheckResults': [{'Path': 'vehicle', 'MdmFoundIndicator': False, 'DocumentCheckStatuses': [{'DocumentType': 'VehicleDocument', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': False}]}, {'Path': 'parties[0].person', 'MdmFoundIndicator': True, 'DocumentCheckStatuses': [{'DocumentType': 'IdentityCard', 'FoivFoundIndicator': False, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': False, 'MdmCheckedIndicator': True}, {'DocumentType': 'DriverLicense', 'FoivFoundIndicator': True, 'MdmFoundIndicator': True, 'FoivCheckedIndicator': True, 'MdmCheckedIndicator': True}]}], 'ProcessingResult': {'RequestType': 'DraftAddendum', 'InternalIds': {'ContractId': '89a2d9da-0aa8-4c08-92a3-e0b4b7bd0b5c', 'AddendumId': '8800b9ea-9a90-4d6e-8d70-d3796c16c7ac'}, 'InsuranceContract': {'AddendumSeries': 'XXX', 'AddendumNumber': 3456789121, 'StatusCode': 1, 'ReadyToSignIndicator': True}, 'Vehicle': {'MdmId': 12345678912}, 'Parties': [{'PartyType': 'Person', 'PartyRoles': ['PolicyHolder', 'Owner', 'Driver'], 'Person': {'MdmId': 83573853568}}]}, 'RequestId': '4018d075-5114-4630-b85e-af251186f69d', 'ResponseId': 'fff69a47-bd9b-461c-803c-77e1156b89a9', 'StatusCode': 3, 'LastModified': '2020-01-01T15:05:55Z'}}
02/17/2020 10:21:45 AM - <module> - CRITICAL: Test failed!
02/17/2020 10:21:45 AM - <module> - INFO: Connections closed!
